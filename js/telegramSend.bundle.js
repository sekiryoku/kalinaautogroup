document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".modal-overlay"),t=document.querySelector(".modal__close"),o=document.querySelector(".result-modal"),n=document.querySelector("#resultModalMessage"),r=document.querySelector("#resultModalClose");function a(e){n.textContent=e,o.classList.add("active")}function c(){e.classList.remove("active")}function d(e){const t=document.querySelector(e);t&&t.addEventListener("submit",(function(e){e.preventDefault();const o=new FormData(t);let n={};n="auto-parts"===o.get("form-type")?{name:o.get("name"),phone:o.get("phone"),"car-brand":o.get("car-brand"),"car-model":o.get("car-model"),"part-description":o.get("part-description"),"form-type":"auto-parts"}:{name:o.get("name"),phone:o.get("phone"),budget:o.get("budget")||"",model:o.get("model")||"",comment:o.get("comment")||""},fetch("/telegramSendler.php",{method:"POST",headers:{"Content-Type": "application/json",},body:new URLSearchParams(n).toString()}).then((e=>e.json())).then((e=>{e.ok?(o.get("form-type")||c(),a("Сообщение успешно отправлено! Скоро с вами свяжутся."),t.reset()):a("Ошибка: "+e.message+". Попробуйте позже.")})).catch((e=>{console.error("Ошибка при отправке запроса:",e),a("Ошибка при отправке запроса. Попробуйте позже.")}))}))}t&&t.addEventListener("click",c),e&&e.addEventListener("click",(t=>{t.target===e&&c()})),r&&r.addEventListener("click",(function(){o.classList.remove("active")})),d(".footer__form form"),d(".modal__form form"),d(".consultation__form"),d(".order__form form")}));